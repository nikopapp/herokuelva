"use strict";var divAnim=document.getElementById("animation"),animate=function(callback){var images=new Array,anchors=new Array;images.push(document.getElementById("titleEAT"));for(var i=1;i<=43;i++)anchors.push(document.createElement("a")),images.push(document.createElement("img")),images[i].setAttribute("src","images/animation/m"+i+".png"),images[i].setAttribute("id","drop"+i),images[i].setAttribute("width",40+i%9+"px"),anchors[i-1].appendChild(images[i]),divAnim.appendChild(anchors[i-1]);document.getElementsByClassName("animation");var counter=0;images[0].style.top="20%",images[0].style.left="43%";for(i=1;i<15;i++)images[i].style.top=10+getRandomArbitrary(15,40)+"%",images[i].style.left=35+getRandomArbitrary(0,20)+"%",makePortalDrops(images[i],i);for(i=15;i<30;i++)images[i].style.top=10+getRandomArbitrary(5,60)+"%",images[i].style.left=35+getRandomArbitrary(-10,45)+"%",makePortalDrops(images[i],i);for(i=30;i<=43;i++)images[i].style.top=10+getRandomArbitrary(-5,80)+"%",images[i].style.left=35+getRandomArbitrary(-30,75)+"%",makePortalDrops(images[i],i);var id=setInterval(function(){1==images[0].style.opacity?clearInterval(id):0==counter?images[1].style.opacity=.8:2==counter?images[2].style.opacity=.8:3==counter?images[3].style.opacity=.8:6==counter?images[4].style.opacity=.81:8==counter?images[5].style.opacity=.81:10==counter?images[6].style.opacity=.6:11==counter?images[7].style.opacity=.6:13==counter?images[8].style.opacity=.6:16==counter?images[9].style.opacity=.61:18==counter?images[10].style.opacity=.61:20==counter?images[11].style.opacity=.6:22==counter?images[12].style.opacity=.6:23==counter?images[13].style.opacity=.6:26==counter?images[14].style.opacity=.61:28==counter?images[15].style.opacity=.61:30==counter?images[16].style.opacity=.6:31==counter?images[17].style.opacity=.8:33==counter?images[18].style.opacity=.8:36==counter?images[19].style.opacity=.81:38==counter?images[20].style.opacity=.81:40==counter?images[21].style.opacity=.6:42==counter?images[22].style.opacity=.6:43==counter?images[23].style.opacity=.6:46==counter?images[24].style.opacity=.61:48==counter?images[25].style.opacity=.61:50==counter?images[26].style.opacity=.6:51==counter?images[27].style.opacity=.8:52==counter?images[28].style.opacity=.8:55==counter?images[29].style.opacity=.81:57==counter?images[30].style.opacity=.81:58==counter?images[31].style.opacity=.81:60==counter?images[32].style.opacity=.6:62==counter?images[33].style.opacity=.6:63==counter?images[34].style.opacity=.6:66==counter?images[35].style.opacity=.61:68==counter?images[36].style.opacity=.61:70==counter?images[37].style.opacity=.6:71==counter?images[38].style.opacity=.8:72==counter?images[39].style.opacity=.8:75==counter?images[40].style.opacity=.81:77==counter?images[41].style.opacity=.81:78==counter?images[42].style.opacity=.81:82==counter&&(images[43].style.opacity=.6);counter++},80)};function makePortals(drop,i){function makeBlownDrop(){drop.style.transition="all 0.6s ease",drop.setAttribute("src","images/gallery_pictures/colourfields_series/c"+(1+Math.floor(1e4*Math.random()%27))+".jpg"),drop.setAttribute("width","200px"),drop.style.zIndex="30"}drop.onmouseenter=makeBlownDrop,drop.ontouchstart=makeBlownDrop,drop.onmouseleave=function(){drop.style.zIndex="1",drop.setAttribute("width","50px"),drop.setAttribute("src","images/animation/m"+i+".png")}}function makePortalDrops(drop,i){drop.onmouseenter=function(){var imageSwap=new Image,randomNum=1+Math.floor(1e4*Math.random()%22);console.log("1st"+randomNum),imageSwap.src="images/gallery_pictures/colourfields_series/c"+randomNum+".jpg",drop.parentElement.href="#!/info/paintings/"+randomNum,drop.style.transition="all 0.6s ease",drop.setAttribute("src","images/gallery_pictures/colourfields_series/c"+randomNum+".jpg"),drop.setAttribute("width","200px"),drop.style.transform="translate3d(-75px,-75px,0px)",drop.style.zIndex="3",drop.style.opacity=".85"},drop.onmouseleave=function(){drop.style.zIndex="1",drop.setAttribute("width","50px"),drop.style.transform="translate3D(0px,0px,0px)",drop.style.opacity="0.7",drop.setAttribute("src","images/animation/m"+i+".png")}}function putMask(){var imagecanvas=document.createElement("canvas"),imagecontext=imagecanvas.getContext("2d");window.addEventListener("load",function(){[].forEach.call(document.querySelectorAll(".mask"),function(img){var newImg=document.createElement("img");newImg.src=img.src,newImg.onload=function(){var width=newImg.width,height=newImg.height,mask=document.createElement("img");mask.src=img.getAttribute("data-mask"),mask.onload=function(){imagecanvas.width=width,imagecanvas.height=height,imagecontext.drawImage(mask,0,0,width,height),imagecontext.globalCompositeOperation="source-atop",imagecontext.drawImage(img,0,0),img.src=imagecanvas.toDataURL()}}})},!1)}function makeInit(){window.location.href.includes("grid")||window.location.href.includes("info")||window.location.href.includes("about")||((divAnim=document.getElementById("animation"))?animate(makePortals):setTimeout(makeInit,2e3))}function getRandomArbitrary(min,max){return Math.random()*(max-min)+min}window.onload=makeInit,angular.module("paintings",["ngResource","ngRoute"]),angular.module("paintings").config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{title:"Home",controller:"homeVC as home",templateUrl:"ang_apps/templates/homeView.html"}).when("/:lang",{title:"Home",controller:"homeVC as home",templateUrl:"ang_apps/templates/homeView.html"}).when("/grid/:gallery/:lang",{title:"Gallery",controller:"PgridVC as paintingCtrl",templateUrl:"ang_apps/templates/gridView.html"}).when("/about/elva",{title:"Bio",controller:"aboutCtrl as paintingCtrl",templateUrl:"ang_apps/templates/aboutView.html"}).when("/full/video",{title:"Video feed",controller:"videoCtrl as video",templateUrl:"ang_apps/templates/videoView.html"}).otherwise({redirectTo:"/"})}]),angular.module("paintings").run(["$rootScope",function($rootScope){$rootScope.$on("$routeChangeSuccess",function(event,current,previous){$rootScope.title=current.$$route.title})}]),angular.module("paintings").controller("homeVC",["$scope",function(scope){this.titleHead="Elva Arce - Home",document.getElementsByTagName("body")[0].className="normal"}]),angular.module("paintings").controller("aboutCtrl",[function(){this.titleHead="Elva Arce - About",document.getElementsByTagName("body")[0].className="normal"}]),angular.module("paintings").controller("videoCtrl",[function(){this.titleHead="Elva Arce - Video",document.getElementsByTagName("body")[0].className="normal"}]),angular.module("paintings").controller("PgridVC",["$scope","Colourfields","Mix","Watercolor","$routeParams","languageService",function(scope,Painting,Mix,Watercolor,routeParams,languageService){var self=this;self.languageObj=languageService.setBind,self.gallery=routeParams.gallery,self.getPaint=function(){Painting.get().$promise.then(function(data){self.paintings=data.items,self.folder=data.folder})},self.getMix=function(){Mix.get().$promise.then(function(data){self.paintings=data.items,self.folder=data.folder})},self.getWatercolor=function(){Watercolor.get().$promise.then(function(data){self.paintings=data.items,self.folder=data.folder})},self.scrollToTop=function(event){window.scroll(0,0)},"colourfields_series"===routeParams.gallery?(document.getElementsByTagName("body")[0].className="normal",self.getPaint(),"ENG"===routeParams.lang?self.title={value:"Colourfields Series"}:self.title={value:"Series Campos de color"}):"mix_tech"===routeParams.gallery?(document.getElementsByTagName("body")[0].className="normal",self.getMix(),"ENG"===routeParams.lang?self.title={value:"Mixed Techniques"}:self.title={value:"TÃ©cnicas Mixtas"}):"watercolor"===routeParams.gallery&&(document.getElementsByTagName("body")[0].className="normal",self.getWatercolor(),"ENG"===routeParams.lang?self.title={value:"Watercolour"}:self.title={value:"Acuarela"}),self.setTitle=function(value){self.title.value=value},self.placeholderClassName="",languageService.bindSetTitle(self.setTitle,routeParams.gallery)}]),angular.module("paintings").controller("navCtrl",["$scope","languageService","$routeParams",function(scope,languageService,routeParams){var self=this;self.languageObj=languageService.setBind(),self.menuENG={artwork:"ARTWORK",paintings:"COLOURFIELDS SERIES",mix_tech:"MIXED TECHNIQUES",watercolor:"WATERCOLOUR"},self.menuESP={artwork:"OBRAS",paintings:"SERIES CAMPOS DE COLOR",mix_tech:"TECNICAS MIXTAS",watercolor:"ACUARELA"},self.titleHead=" - Personal Gallery","ESP"===self.languageObj.value?self.menu=self.menuESP:self.menu=self.menuENG,self.setLangESP=function(){self.languageObj.value="ESP",languageService.setMenu(self.menuEsp),self.menu=self.menuESP},self.setLangENG=function(){self.languageObj.value="ENG",languageService.setMenu(self.menuEsp),self.menu=self.menuENG},window.location.href.includes("ESP")?self.setLangESP():self.setLangENG(),self.gallery="normal"}]),angular.module("paintings").factory("Colourfields",function($resource){return $resource("/api/colourfields_series/:id",{id:"@id"},{update:{method:"PUT"}})}),angular.module("paintings").factory("Mix",function($resource){return $resource("/api/mix_tex/:id",{id:"@id"},{update:{method:"PUT"}})}),angular.module("paintings").factory("Watercolor",function($resource){return $resource("/api/watercolor/:id",{id:"@id"},{update:{method:"PUT"}})}),angular.module("paintings").service("languageService",["$routeParams",function(routeParams){var self=this;self.languageObj={value:routeParams.lang},self.titleBank={ENG:{colourfields_series:"Colourfields Series",mix_tech:"Mixed Techniques",watercolor:"Watercolour"},ESP:{colourfields_series:"Series Campos de color",mix_tech:"Tecnicas Mixtas",watercolor:"Acuarela"}},self.menu,self.setMenu=function(menu){self.menu=menu,self.setTitle&&self.setTitle(self.titleBank[self.languageObj.value][self.gallery])},self.getTitleBank=function(obj){return self.titleBank[obj.value]},self.bindSetTitle=function(funcTitle,gallery){self.gallery=gallery,self.setTitle=funcTitle},self.setBind=function(){return self.languageObj}}]);