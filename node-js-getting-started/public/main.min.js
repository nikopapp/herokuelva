"use strict";function makePortals(e,t){function a(){e.style.transition="all 0.6s ease",e.setAttribute("src","images/gallery_pictures/painting/c"+(1+Math.floor(1e4*Math.random()%27))+".jpg"),e.setAttribute("width","200px"),e.style.zIndex="30"}function l(){e.style.zIndex="1",e.setAttribute("width","50px"),e.setAttribute("src","images/animation/m"+t+".png")}e.onmouseenter=a,e.ontouchstart=a,e.onmouseleave=l}function makePortalDrops(e,t){e.onmouseenter=function(){var t=new Image,a=1+Math.floor(1e4*Math.random()%27);console.log("1st"+a),t.src="images/gallery_pictures/painting/c"+a+".jpg",e.parentElement.href="#!/info/paintings/"+a,e.style.transition="all 0.6s ease",e.setAttribute("src","images/gallery_pictures/painting/c"+a+".jpg"),e.setAttribute("width","200px"),e.style.transform="translate3d(-75px,-75px,0px)",e.style.zIndex="3",e.style.opacity=".85"},e.onmouseleave=function(){e.style.zIndex="1",e.setAttribute("width","50px"),e.style.transform="translate3D(0px,0px,0px)",e.style.opacity="0.7",e.setAttribute("src","images/animation/m"+t+".png")}}function putMask(){var e=document.createElement("canvas"),t=e.getContext("2d");window.addEventListener("load",function(){[].forEach.call(document.querySelectorAll(".mask"),function(a){var l=document.createElement("img");l.src=a.src,l.onload=function(){var n=l.width,i=l.height,o=document.createElement("img");o.src=a.getAttribute("data-mask"),o.onload=function(){e.width=n,e.height=i,t.drawImage(o,0,0,n,i),t.globalCompositeOperation="source-atop",t.drawImage(a,0,0),a.src=e.toDataURL()}}})},!1)}function makeInit(){window.location.href.includes("grid")||window.location.href.includes("info")||window.location.href.includes("about")||(console.log("makeInit"),(divAnim=document.getElementById("animation"))?(console.log("if"),animate(makePortals)):(console.log("else"),setTimeout(makeInit,2e3)))}function getRandomArbitrary(e,t){return Math.random()*(t-e)+e}var divAnim=document.getElementById("animation"),animate=function(e){function t(){1==a[0].style.opacity?clearInterval(s):0==o?a[1].style.opacity=.8:2==o?a[2].style.opacity=.8:3==o?a[3].style.opacity=.8:6==o?a[4].style.opacity=.81:8==o?a[5].style.opacity=.81:10==o?a[6].style.opacity=.6:11==o?a[7].style.opacity=.6:13==o?a[8].style.opacity=.6:16==o?a[9].style.opacity=.61:18==o?a[10].style.opacity=.61:20==o?a[11].style.opacity=.6:22==o?a[12].style.opacity=.6:23==o?a[13].style.opacity=.6:26==o?a[14].style.opacity=.61:28==o?a[15].style.opacity=.61:30==o?a[16].style.opacity=.6:31==o?a[17].style.opacity=.8:33==o?a[18].style.opacity=.8:36==o?a[19].style.opacity=.81:38==o?a[20].style.opacity=.81:40==o?a[21].style.opacity=.6:42==o?a[22].style.opacity=.6:43==o?a[23].style.opacity=.6:46==o?a[24].style.opacity=.61:48==o?a[25].style.opacity=.61:50==o?a[26].style.opacity=.6:51==o?a[27].style.opacity=.8:52==o?a[28].style.opacity=.8:55==o?a[29].style.opacity=.81:57==o?a[30].style.opacity=.81:58==o?a[31].style.opacity=.81:60==o?a[32].style.opacity=.6:62==o?a[33].style.opacity=.6:63==o?a[34].style.opacity=.6:66==o?a[35].style.opacity=.61:68==o?a[36].style.opacity=.61:70==o?a[37].style.opacity=.6:71==o?a[38].style.opacity=.8:72==o?a[39].style.opacity=.8:75==o?a[40].style.opacity=.81:77==o?a[41].style.opacity=.81:78==o?a[42].style.opacity=.81:82==o?a[43].style.opacity=.6:83==o?a[44].style.opacity=.6:86==o?a[45].style.opacity=.61:87==o?a[46].style.opacity=.61:88==o?a[47].style.opacity=.6:89==o?n.style.opacity=.6:90==o?i.style.opacity=.05:91==o?(i.style.opacity=.1,n.style.opacity=.55):92==o?(i.style.opacity=.2,n.style.opacity=.5):93==o?(i.style.opacity=.35,n.style.opacity=.35):94==o?(i.style.opacity=.5,n.style.opacity=.2):95==o&&(n.style.opacity=0,i.style.opacity=.6),o++}var a=new Array,l=new Array;a.push(document.getElementById("titleEAT"));for(r=1;r<=47;r++)l.push(document.createElement("a")),a.push(document.createElement("img")),a[r].setAttribute("src","images/animation/m"+r+".png"),a[r].setAttribute("id","drop"+r),a[r].setAttribute("width",40+r%9+"px"),l[r-1].appendChild(a[r]),divAnim.appendChild(l[r-1]);document.getElementById("iheader");var n=document.getElementById("logo-wet"),i=document.getElementById("logo"),o=(document.getElementsByClassName("animation"),0);a[0].style.top="20%",a[0].style.left="43%";for(r=1;r<15;r++)console.log("dike mou"),a[r].style.top=10+getRandomArbitrary(15,40)+"%",a[r].style.left=35+getRandomArbitrary(0,20)+"%",makePortalDrops(a[r],r);for(r=15;r<30;r++)a[r].style.top=10+getRandomArbitrary(5,60)+"%",a[r].style.left=35+getRandomArbitrary(-10,45)+"%",makePortalDrops(a[r],r);for(var r=30;r<=47;r++)a[r].style.top=10+getRandomArbitrary(-5,80)+"%",a[r].style.left=35+getRandomArbitrary(-30,75)+"%",makePortalDrops(a[r],r);var s=setInterval(t,80)};window.onload=makeInit;var app_ang=angular.module("paintings",["ngResource","ngRoute"]);app_ang.config(["$routeProvider",function(e){e.when("/",{controller:"homeVC as home",templateUrl:"ang_apps/templates/homeView.html"}).when("/:lang",{controller:"homeVC as home",templateUrl:"ang_apps/templates/homeView.html"}).when("/grid/:gallery/:lang",{controller:"PgridVC as paintingCtrl",templateUrl:"ang_apps/templates/gridView.html"}).when("/info/:gallery/:id",{controller:"PinfoVC as info",templateUrl:"ang_apps/templates/infoView.html"}).when("/about/elva",{controller:"aboutCtrl as paintingCtrl",templateUrl:"ang_apps/templates/aboutView.html"}).when("/full/video",{controller:"videoCtrl as video",templateUrl:"ang_apps/templates/videoView.html"}).otherwise({redirectTo:"/"})}]),app_ang.controller("homeVC",["$scope",function(e){this.titleHead="Elva Arce - Home",document.getElementsByTagName("body")[0].className="normal"}]),app_ang.controller("aboutCtrl",[function(){this.titleHead="Elva Arce - About",document.getElementsByTagName("body")[0].className="normal"}]),app_ang.controller("videoCtrl",[function(){this.titleHead="Elva Arce - Video",document.getElementsByTagName("body")[0].className="normal"}]),app_ang.controller("PgridVC",["$scope","Painting","Mix","Islamic","Watercolor","$routeParams","languageService",function(e,t,a,l,n,i,o){function r(){t.get().$promise.then(function(e){p.paintings=e.items,p.folder=e.folder})}function s(){a.get().$promise.then(function(e){p.paintings=e.items,p.folder=e.folder})}function c(){l.get().$promise.then(function(e){p.paintings=e.items,p.folder=e.folder})}function m(){n.get().$promise.then(function(e){p.paintings=e.items,p.folder=e.folder})}function g(e){console.log("myevent",e),window.scroll(0,0)}var p=this;p.languageObj=o.setBind,console.log(i),p.gallery=i.gallery,p.getPaint=r,p.getMix=s,p.getWatercolor=m,p.getIslam=c,p.scrollToTop=g,"paintings"===i.gallery?(document.getElementsByTagName("body")[0].className="normal",p.getPaint(),"ENG"===i.lang?p.title={value:"Paintings"}:p.title={value:"Pintura"}):"mix_tech"===i.gallery?(document.getElementsByTagName("body")[0].className="normal",p.getMix(),"ENG"===i.lang?p.title={value:"Mixed Techniques"}:p.title={value:"Técnicas Mixtas"}):"watercolor"===i.gallery?(document.getElementsByTagName("body")[0].className="normal",p.getWatercolor(),"ENG"===i.lang?p.title={value:"Watercolour"}:p.title={value:"Acuarela"}):(p.getIslam(),document.getElementsByTagName("body")[0].className="islamic","ENG"===i.lang?p.title={value:"Islamic Art"}:p.title={value:"Arte Islámico"}),p.setTitle=function(e){p.title.value=e},p.placeholderClassName="",o.bindSetTitle(p.setTitle,i.gallery)}]),app_ang.controller("navCtrl",["$scope","languageService","$routeParams",function(e,t,a){var l=this;l.languageObj=t.setBind(),l.menuENG={artwork:"ARTWORK",paintings:"PAINTINGS",mix_tech:"MIXED TECHNIQUES",islamic:"ISLAMIC ART",watercolor:"WATERCOLOUR"},l.menuESP={artwork:"OBRAS",paintings:"PINTURA",mix_tech:"TECNICAS MIXTAS",islamic:"ARTE ISLAMICO",watercolor:"ACUARELA"},l.titleHead=" - Personal Gallery",console.log(a),"ESP"===l.languageObj.value?l.menu=l.menuESP:l.menu=l.menuENG,console.log("hola!"+l.languageObj.value),l.setLangESP=function(){console.log("changed"),l.languageObj.value="ESP",t.setMenu(l.menuEsp),l.menu=l.menuESP},l.setLangENG=function(){console.log("changed"),l.languageObj.value="ENG",t.setMenu(l.menuEsp),l.menu=l.menuENG},window.location.href.includes("ESP")?l.setLangESP():l.setLangENG(),window.location.href.includes("islamic")?l.gallery="islamic":l.gallery="normal"}]),app_ang.controller("PinfoVC",["$scope","$routeParams","Painting","Mix","Watercolor","languageService",function(e,t,a,l,n,i){function o(e,t){t.get({id:e}).$promise.then(function(t){console.log(t),s.imageId=t.item.id,s.imageAlt=t.item.alt,t.item.descriptionENG&&(s.imageDescENG=t.item.descriptionENG.split(". ")),t.item.descriptionESP&&(s.imageDescESP=t.item.descriptionESP.split(". ")),s.imageSrc=t.folder+t.item.path,s.imageSrcNext=t.folder+t.nextImg.path,s.imageSrcPrev=t.folder+t.prevImg.path,s.imageAltPrev=t.prevImg.alt,s.imageAltNext=t.nextImg.alt,s.placeholderClassName="",s.getNext=function(){var a=(e+1)%t.itemsLength;console.log(a),o(a,s.currentGallery)},s.getPrev=function(){var a=e-1,l=a>=0?a:t.itemsLength-1;console.log(l),o(l,s.currentGallery)}}).catch(function(e){console.log(e)})}console.log(t);var r=parseInt(t.id),s=this;s.eng="ENG",s.esp="ESP","paintings"===t.gallery?s.currentGallery=a:"mix_tech"===t.gallery?s.currentGallery=l:s.currentGallery=n,s.blowUp=function(e){console.log("blowUp",e),s.imageClass="blowUp"},s.languageObj=i.setBind(),s.refresh=o,o(r,s.currentGallery)}]),app_ang.factory("Painting",function(e){return e("/api/paintings/:id",{id:"@id"},{update:{method:"PUT"}})}),app_ang.factory("Mix",function(e){return e("/api/mix_tex/:id",{id:"@id"},{update:{method:"PUT"}})}),app_ang.factory("Islamic",function(e){return e("/api/islamic/:id",{id:"@id"},{update:{method:"PUT"}})}),app_ang.factory("Watercolor",function(e){return e("/api/watercolor/:id",{id:"@id"},{update:{method:"PUT"}})}),app_ang.service("languageService",["$routeParams",function(e){var t=this;console.log(e),t.languageObj={value:e.lang},t.titleBank={ENG:{paintings:"Paintings",mix_tech:"Mixed Techniques",islamic:"Islamic Art",watercolor:"Watercolour"},ESP:{paintings:"Pintura",mix_tech:"Tecnicas Mixtas",islamic:"Arte Islamico",watercolor:"Acuarela"}},t.menu,t.setMenu=function(e){t.menu=e,t.setTitle&&t.setTitle(t.titleBank[t.languageObj.value][t.gallery])},t.getTitleBank=function(e){return t.titleBank[e.value]},t.bindSetTitle=function(e,a){t.gallery=a,t.setTitle=e},t.setBind=function(){return t.languageObj}}]);